<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ø¬Ø¯ÙˆÙ„ Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ… - Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">

<style>
Â html, body, * {
Â  font-family: 'Tajawal', 'Segoe UI', Tahoma, Arial, sans-serif !important;
Â  -webkit-text-size-adjust: 100%;
    box-sizing: border-box; /* Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªØ¬Ø§ÙˆØ¨ Ø§Ù„ØµØ­ÙŠØ­ */
}
@font-face {
Â  font-family: 'Tajawal';
Â  src: url('https://falahsab.github.io/jedwal/fonts/Tajawal-Regular.woff2') format('woff2'),
Â  Â  Â  Â url('https://falahsab.github.io/jedwal/fonts/Tajawal-Regular.woff') format('woff');
Â  font-weight: 400;
Â  font-style: normal;
Â  font-display: swap;
}
@font-face {
Â  font-family: 'Tajawal';
Â  src: url('https://falahsab.github.io/jedwal/fonts/Tajawal-Bold.woff2') format('woff2'),
Â  Â  Â  Â url('https://falahsab.github.io/jedwal/fonts/Tajawal-Bold.woff') format('woff');
Â  font-weight: 700;
Â  font-style: normal;
Â  font-display: swap;
}

body { 
    background:#ffffff; 
    padding:0; /* ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ */
    color:#ffffff; 
    min-height:100vh; 
    display:flex; 
    flex-direction:column; 
    /* Ø¥Ø²Ø§Ù„Ø© align-items: center; Ù„ÙŠØµØ¨Ø­ Ø§Ù„ØªÙˆØ³ÙŠØ· Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„Ù€ main-container */
    width: 100%;
    overflow-x: hidden;
}

/* **Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©: Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„Ø© Ø¹Ù† Ø§Ù„ØªÙˆØ³ÙŠØ·** */
.main-container {
    width: 100%; /* ØªÙ…Ù„Ø£ Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø§Ø´Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ */
    max-width: 1200px; /* **Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø¹Ø±Ø¶ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø©** */
    margin: 0 auto; /* **Ø§Ù„ØªÙˆØ³ÙŠØ· Ø§Ù„Ø£ÙÙ‚ÙŠ Ø§Ù„ÙØ¹Ù„ÙŠ Ù„Ù„Ù…Ø­ØªÙˆÙ‰** */
    padding: 0 16px; /* Ù‡ÙˆØ§Ù…Ø´ Ø¯Ø§Ø®Ù„ÙŠØ© Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… Ù…Ù„Ø§Ù…Ø³Ø© Ø§Ù„Ø­ÙˆØ§Ù Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù„ */
    flex-grow: 1; /* Ù„Ù…Ù„Ø¡ Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø¹Ù…ÙˆØ¯ÙŠØ© Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© */
}
/* Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */

header { 
    background:#070607; 
    color:#fff; 
    padding:12px 16px; 
    border-radius:0; /* ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù„ÙŠÙ…Ù„Ø£ Ø§Ù„Ø¹Ø±Ø¶ */
    margin-bottom:0; /* ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„: Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù‡Ø§Ù…Ø´ Ù…Ù† Ø§Ù„Ù‡ÙŠØ¯Ø± */
    text-align:center; 
    font-size:22px; 
    font-weight:700; 
    position:sticky; 
    top:0; 
    z-index:1000;
    width: 100%; /* Ø¶Ù…Ø§Ù† Ù…Ù„Ø¡ Ø§Ù„Ø¹Ø±Ø¶ */
}
.grid{
    display:grid; 
    grid-template-columns:1fr 400px; 
    gap:14px;
    margin-top: 18px; /* Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨Ø¹Ø¯ Ø§Ù„Ù€ Header Ø£ØµØ¨Ø­Øª Ù‡Ù†Ø§ */
}
@media(max-width:900px){.grid{grid-template-columns:1fr}}

.card{background:#252525;border-radius:12px;padding:14px;box-shadow:0 4px 15px rgba(0,0,0,0.08);}
.row{display:flex; gap:8px; align-items:center; margin-bottom:10px; flex-wrap:wrap;}
select,input[type="time"]{background:#444444; border:1px solid rgba(255,255,25,0.12); padding:8px; border-radius:8px; color:#ffffff; width:100%;}
label{font-size:13px;color:##ffffff;display:block;margin-bottom:4px;}
.logo{height: auto; max-width: 100%;border-radius:8px; overflow:hidden; display:flex; align-items:center; justify-content:center;}
.logo img{width:100%;height:100%;object-fit:contain; transition:width 0.3s,height 0.3s;}
.btn{background:#3498db;color:#fff;padding:10px;border-radius:10px;border:none;cursor:pointer;font-weight:700;width:100%;}
.matches-wrapper{margin-top:12px;}
.matches-section{margin-bottom:16px;}
.section-header{display:flex;align-items:center;gap:8px;font-weight:700;font-size:15px;margin-bottom:8px;position:relative;padding-left:40px;}
.extra-logo-header{position:absolute; left:0; top:50%; transform:translateY(-50%); width:auto; height:24px;}
.match-card{display:flex;flex-direction:column;border-radius:7px;border:1px solid rgba(0,0,0,0.05);padding:10px;margin-bottom:2px;position:relative; overflow:hidden;background-color:#191919}
.match-card::before{content:""; position:absolute; inset:0; background-image:url('https://falahsab.github.io/jedwal/img/yemen-sat0.png'); background-repeat:repeat; background-size:60px auto; opacity:0.04; pointer-events:none; z-index:0;background-color:#191919;}
.match-card>*{position:relative; z-index:1;}
.match_row{display:flex; align-items:center; justify-content:space-between; flex-wrap:wrap; gap:8px;}
.team{display:flex; align-items:center; gap:6px; flex:1; min-width:0; white-space:nowrap;}
.team.hometeam{justify-content:flex-end;}
.team.awayteam{justify-content:flex-start;}
.team_logo{width:clamp(25px,4vw,38px); height:clamp(25px,4vw,38px); object-fit:contain;}
.the_team{font-weight:700; font-size:clamp(13px,2vw,17px); overflow:hidden; text-overflow:ellipsis; white-space:nowrap;}
.middle_column{display:flex; flex-direction:column; align-items:center; justify-content:center; font-weight:700; font-size:clamp(15px,2vw,22px); line-height:1.1;}
.the_time{display:flex; align-items:center; gap:4px; justify-content:center;}
.next-day-label{font-size:10px; color:#98999a; margin-top:0; line-height:1;}
.meta{display:flex; justify-content:center; align-items:center; gap:20px; font-size:13px; color:#efeded; margin-top:6px; font-weight:500; flex-wrap:wrap; text-align:center;}
.action-btns{display:flex; gap:6px; margin-top:6px; justify-content:center; flex-wrap:wrap;}
.action-btns button{padding:4px 8px; border:none; border-radius:6px; cursor:pointer; font-size:12px;}
.channel-logo{position:absolute; bottom:6px; left:6px; width:auto; height:35px; object-fit:contain; z-index:3;}
@media print{.action-btns, #downloadTable, #finalView, .form, #toggleBtns, #deleteAll, #nextDayBtn{display:none !important;}}
</style>
</head>
<body>

<header>
âš½ Ø¬Ø¯ÙˆÙ„ Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…
<div id="todayDate" style="font-size:16px;font-weight:400;margin-top:4px;"></div>
</header>

<div class="main-container">

    <div class="grid">
    Â  <div class="card form">
    Â  Â  <div class="row">
    Â  Â  Â  <div style="flex:1"><label>Ø§Ù„Ø¯ÙˆØ±ÙŠ</label><select id="leagueSelect"></select></div>
    Â  Â  Â  <div style="width:120px"><label>Ø§Ù„ÙˆÙ‚Øª</label><input id="matchTime" type="time" /></div>
    Â  Â  </div>
    Â  Â  <div class="row">
    Â  Â  Â  <div style="flex:1"><label>Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ù…Ø¶ÙŠÙ</label><select id="homeTeam"></select></div>
    Â  Â  Â  <div style="width:50px"><label>&nbsp;</label><div class="logo" id="homePreview">ğŸ </div></div>
    Â  Â  </div>
    Â  Â  <div class="row">
    Â  Â  Â  <div style="flex:1"><label>Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø¶ÙŠÙ</label><select id="awayTeam"></select></div>
    Â  Â  Â  <div style="width:50px"><label>&nbsp;</label><div class="logo" id="awayPreview">âš½</div></div>
    Â  Â  </div>
    Â  Â  <div class="row">
    Â  Â  Â  <div style="flex:1"><label>Ø§Ù„Ù…Ø¹Ù„Ù‚</label><select id="commentator"></select></div>
    Â  Â  Â  <div style="width:180px"><label>Ø§Ù„Ù‚Ù†Ø§Ø© Ø§Ù„Ù†Ø§Ù‚Ù„Ø©</label><select id="channel"></select></div>
    Â  Â  </div>

    Â  Â  <div style="display:flex;gap:6px;flex-wrap:wrap;">
    Â  Â  Â  <button id="addMatch" class="btn" style="flex:1;">â• Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©</button>
    Â  Â  Â  <button id="nextDayBtn" class="btn" style="background:#6c5ce7;flex:0 0 auto;">ğŸ“… Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ØªØ§Ù„ÙŠ: <span id="nextDayState">âŒ</span></button>
    Â  Â  </div>

    Â  Â  <button id="toggleBtns" class="btn" style="margin-top:6px;">ğŸ‘ï¸ Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙˆØ§Ù„Ø­Ø°Ù</button>
    Â  Â  <button id="deleteAll" class="btn" style="margin-top:6px;">ğŸ—‘ï¸ Ø­Ø°Ù ÙƒÙ„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª</button>
    Â  </div>
    </div>

    <div class="matches-wrapper">
    Â  <div class="card"><div id="matchesContainer"></div> <center>Ù…Ø¹ vip Ø¹ÙŠØ´ Ø§Ù„Ù…ØªØ¹Ø© .. Ø§Ø´ØªØ±Ùƒ Ø§Ù„Ø¢Ù†</center></div>
    Â Â 
    <button id="finalView" class="btn" style="margin-top:12px;">ğŸ”— Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</button>
    <button id="downloadTable" class="btn" style="margin-top:8px;">ğŸ“¸ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙˆÙ„ ÙƒØµÙˆØ±Ø©</button>
    <a id="downloadLink"></a>
    </div>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded',()=>{

const dateEl=document.getElementById('todayDate');
const days=['Ø§Ù„Ø£Ø­Ø¯','Ø§Ù„Ø§Ø«Ù†ÙŠÙ†','Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡','Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡','Ø§Ù„Ø®Ù…ÙŠØ³','Ø§Ù„Ø¬Ù…Ø¹Ø©','Ø§Ù„Ø³Ø¨Øª'];
const now=new Date();
dateEl.textContent=`${days[now.getDay()]} ${now.getDate()}/${now.getMonth()+1}/${now.getFullYear()}`;

// **ØªÙ… ØªØµØ­ÙŠØ­ Ù…Ø³Ø§Ø±Ø§Øª Ù…Ù„ÙØ§Øª CSV Ø¥Ù„Ù‰ Ù…Ø³Ø§Ø±Ø§Øª Ù…Ø·Ù„Ù‚Ø©**
const API_BASE = 'https://falahsab.github.io/jedwal/';
const leaguesCSV=`${API_BASE}csv/leagues.csv`; 
const commentatorsCSV=`${API_BASE}csv/commentators.csv`;
const channelsCSV=`${API_BASE}csv/channels.csv`; 
const teamsCSVFolder=`${API_BASE}teams/`;

let leagues=[], teams={}, commentators=[], channels=[], showBtns=true;
let matches=[], editIndex=null, isNextDay=false;

const logoCache = new Map();

function fetchCSV(url,callback){
    Papa.parse(url,{
        download:true,
        header:true,
        complete:r=>callback(r.data.filter(row => Object.values(row).some(v => v)))
    });
}
function toBase64(url, callback){
    if (!url || url.includes('undefined')) return callback('');
    if (logoCache.has(url)) return callback(logoCache.get(url));

    const img = new Image();
    img.crossOrigin = 'Anonymous';
    img.onload = () => { 
        const canvas = document.createElement('canvas'); 
        canvas.width=img.width; 
        canvas.height=img.height; 
        canvas.getContext('2d').drawImage(img,0,0); 
        const base64 = canvas.toDataURL();
        logoCache.set(url, base64);
        callback(base64); 
    };
    img.onerror = () => callback('');
    img.src = url;
}

function populateLeagues(){
Â  fetchCSV(leaguesCSV,data=>{
Â  Â  leagues=data;
Â  Â  const leagueSelect=document.getElementById('leagueSelect');
Â  Â  leagueSelect.innerHTML=leagues.map(l=>`<option value='${l.code}' data-logo='${l.logo}' data-color='${l.color||"#fdfdfd"}' data-extra='${l.extraLogo||""}' data-name='${l.name}'>${l.name}</option>`).join('');
Â  Â  loadTeams(leagueSelect.value);
Â  });
}

function loadTeams(leagueCode){
    return new Promise(resolve => {
        fetchCSV(`${teamsCSVFolder}${leagueCode}_teams.csv`,data=>{
    Â  Â  teams[leagueCode]=data;
    Â  Â  const homeTeam=document.getElementById('homeTeam');
    Â  Â  const awayTeam=document.getElementById('awayTeam');
    Â  Â  homeTeam.innerHTML=awayTeam.innerHTML=data.map(t=>`<option value='${t.name}' data-img='${t.img}'>${t.name}</option>`).join('');
    Â  Â  updatePreview(homeTeam,'homePreview', 'ğŸ ');Â 
    Â  Â  updatePreview(awayTeam,'awayPreview', 'âš½');
         resolve();
    Â  });
    });
}

function fetchCommentators(){fetchCSV(commentatorsCSV,data=>{document.getElementById('commentator').innerHTML=data.map(c=>`<option>${c.name}</option>`).join('');});}
function fetchChannels(){fetchCSV(channelsCSV,data=>{channels=data; document.getElementById('channel').innerHTML=data.map(c=>`<option value='${c.name}' data-logo='${c.logo}'>${c.name}</option>`).join('');});}
function updatePreview(selectEl,previewId, defaultIcon){
Â  const s=selectEl.selectedOptions[0];
Â  const img=s ? s.dataset.img : '';
Â  if(img){ toBase64(img, b64 => document.getElementById(previewId).innerHTML=b64?`<img src='${b64}'/>`:defaultIcon); }Â 
Â  else document.getElementById(previewId).innerHTML=defaultIcon;
}

populateLeagues(); fetchCommentators(); fetchChannels();
document.getElementById('leagueSelect').addEventListener('change',e=>loadTeams(e.target.value));
document.getElementById('homeTeam').addEventListener('change',()=>updatePreview(document.getElementById('homeTeam'),'homePreview', 'ğŸ '));
document.getElementById('awayTeam').addEventListener('change',()=>updatePreview(document.getElementById('awayTeam'),'awayPreview', 'âš½'));

if(localStorage.getItem('matches')){matches=JSON.parse(localStorage.getItem('matches')); render();}
document.getElementById('nextDayBtn').onclick=()=>{isNextDay=!isNextDay; document.getElementById('nextDayState').textContent=isNextDay?'âœ…':'âŒ';};

document.getElementById('addMatch').onclick=()=>{
Â  const league=document.getElementById('leagueSelect').value;
Â  const home=document.getElementById('homeTeam').value;
Â  const away=document.getElementById('awayTeam').value;
Â  const time=document.getElementById('matchTime').value;
Â  const comm=document.getElementById('commentator').value;
Â  const chan=document.getElementById('channel').value;
Â  const homeOption=document.getElementById('homeTeam').selectedOptions[0];
Â  const awayOption=document.getElementById('awayTeam').selectedOptions[0];
Â  const channelOption=document.getElementById('channel').selectedOptions[0];
Â  
Â  if(!time || !homeOption || !awayOption || !channelOption){
Â    alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„.');
    return;
  }
  
Â  let homeImgUrl=homeOption.dataset.img;
Â  let awayImgUrl=awayOption.dataset.img;
Â  const chanLogoUrl = channelOption.dataset.logo || '';

Â  toBase64(homeImgUrl,b64Home=>{
Â  Â  toBase64(awayImgUrl,b64Away=>{
Â  Â  Â  toBase64(chanLogoUrl, b64Chan=>{
Â  Â  Â  Â  const newMatch={league,home,away,time,comm,chan,homeImg:b64Home,awayImg:b64Away,chanLogo:b64Chan,nextDay:isNextDay};
Â  Â  Â  Â  
Â  Â  Â  Â  if(editIndex!==null){
Â  Â  Â  Â  Â  matches[editIndex] = newMatch;
Â  Â  Â  Â  Â  editIndex=null;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  matches.push(newMatch);
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  localStorage.setItem('matches',JSON.stringify(matches));
Â  Â  Â  Â  render();
Â  Â  Â  Â  document.getElementById('matchTime').value='';
Â  Â  Â  Â  document.getElementById('addMatch').textContent='â• Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©';
Â  Â  Â  });
Â  Â  });
Â  });
};

function render(){
Â  const matchesContainer=document.getElementById('matchesContainer');
Â  matchesContainer.innerHTML='';
Â  const matchesByLeague = {};
Â  matches.forEach(m => {
        if (!matchesByLeague[m.league]) matchesByLeague[m.league] = [];
        matchesByLeague[m.league].push(m);
    });

Â  leagues.forEach(l=>{
Â  Â  const leagueMatches = matchesByLeague[l.code] || [];
Â  Â  if(leagueMatches.length>0){
Â  Â  Â  const section=document.createElement('div'); section.className='matches-section';
Â  Â  Â  const header=document.createElement('div'); header.className='section-header';
Â  Â  Â  const extraLogo=l.extraLogo||l.extra;
Â  Â  Â  
Â  Â  Â  const leagueLogoB64 = logoCache.get(l.logo) || l.logo;
Â  Â  Â  const extraLogoB64 = logoCache.get(extraLogo) || extraLogo;
Â  Â  Â  
Â  Â  Â  header.innerHTML=`
        ${extraLogo ? `<img src='${extraLogoB64}' class='extra-logo-header'>` : ''} 
        ${l.logo ? `<img src='${leagueLogoB64}' style='width:24px;height:24px'>` : ''} 
        ${l.name}
    `;
Â  Â  Â  section.appendChild(header);

Â  Â  Â  leagueMatches.forEach((m)=>{
Â  Â  Â  Â  const card=document.createElement('div'); 
        card.className=`match-card ${matches.indexOf(m) === editIndex ? 'is-editing' : ''}`; 
        card.style.background=l.color||'#fdfdfd';
Â  Â  Â  Â  
Â  Â  Â  Â  const [hours, minutes] = m.time.split(':');
Â  Â  Â  Â  let displayHours = parseInt(hours,10);
Â  Â  Â  Â  const ampm = displayHours >= 12 ? 'Ù…' : 'Øµ';
Â  Â  Â  Â  displayHours = displayHours % 12 || 12;

Â  Â  Â  Â  card.innerHTML=`
Â  Â  Â  Â  Â  <div class="match_row">
Â  Â  Â  Â  Â  Â  <div class="team hometeam">
Â  Â  Â  Â  Â  Â  Â  <span class="the_team">${m.home}</span>
Â  Â  Â  Â  Â  Â  Â  <img src="${m.homeImg}" class="team_logo" alt="${m.home}">
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="middle_column">
Â  Â  Â  Â  Â  Â  Â  <div class="the_time">
Â  Â  Â  Â  Â  Â  Â  Â  <span>${displayHours}:${minutes}</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span>${ampm}</span>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  ${m.nextDay ? "<div class='next-day-label'>(Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ØªØ§Ù„ÙŠ)</div>" : ""}
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="team awayteam">
Â  Â  Â  Â  Â  Â  Â  <img src="${m.awayImg}" class="team_logo" alt="${m.away}">
Â  Â  Â  Â  Â  Â  Â  <span class="the_team">${m.away}</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div class="meta">
Â  Â  Â  Â  Â  Â  <div>ğŸ™ï¸ ${m.comm}</div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  ${m.chanLogo ? `<img src="${m.chanLogo}" class="channel-logo" alt="${m.chan}">` : ''}

Â  Â  Â  Â  Â  <div class="action-btns" style="display:${showBtns?'flex':'none'}">
Â  Â  Â  Â  Â  Â  <button style="background:#ffc107; color:#000;" onclick="window.editMatchFunc(${matches.indexOf(m)})">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button>
Â  Â  Â  Â  Â  Â  <button style="background:#e74c3c; color:#fff;" onclick="window.deleteMatchFunc(${matches.indexOf(m)})">ğŸ—‘ï¸ Ø­Ø°Ù</button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  `;
Â  Â  Â  Â  section.appendChild(card);
Â  Â  Â  });

Â  Â  Â  matchesContainer.appendChild(section);
Â  Â  }
Â  });
}

window.editMatchFunc=(index)=>{
Â  const m=matches[index];
Â  document.getElementById('leagueSelect').value=m.league;
Â  
  // ÙŠØ¬Ø¨ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙØ±Ù‚ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù‚Ø¨Ù„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø®ØªÙŠØ§Ø± ÙØ±ÙŠÙ‚
Â  loadTeams(m.league).then(()=>{
Â  Â  document.getElementById('homeTeam').value=m.home;
Â  Â  document.getElementById('awayTeam').value=m.away;
Â  Â  document.getElementById('matchTime').value=m.time;
Â  Â  document.getElementById('commentator').value=m.comm;
Â  Â  document.getElementById('channel').value=m.chan;
Â  Â  updatePreview(document.getElementById('homeTeam'),'homePreview', 'ğŸ ');
Â  Â  updatePreview(document.getElementById('awayTeam'),'awayPreview', 'âš½');
Â  Â  
Â  Â  isNextDay = m.nextDay;
Â  Â  document.getElementById('nextDayState').textContent = isNextDay ? 'âœ…' : 'âŒ';

Â  Â  editIndex=index;
Â  Â  document.getElementById('addMatch').textContent='ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª';
Â  Â  render();
Â  });
};

window.deleteMatchFunc=(index)=>{
    if(confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©ØŸ')){
        matches.splice(index,1); 
        localStorage.setItem('matches',JSON.stringify(matches)); 
        render();
        if (editIndex === index) {
            editIndex = null;
            document.getElementById('addMatch').textContent='â• Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©';
        } else if (editIndex !== null && editIndex > index) {
            editIndex--;
        }
    }
};

document.getElementById('toggleBtns').addEventListener('click',()=>{showBtns=!showBtns; render();});
document.getElementById('deleteAll').addEventListener('click',()=>{if(confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù ÙƒÙ„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§ØªØŸ')){matches=[]; localStorage.setItem('matches','[]'); render();}});

document.getElementById('downloadTable').addEventListener('click',()=>{
Â  html2canvas(document.querySelector('.matches-wrapper'), {useCORS:true, allowTaint:true, scale: 2, backgroundColor: '#ffffff'}).then(canvas=>{
Â  Â  const link=document.getElementById('downloadLink');
Â  Â  link.href=canvas.toDataURL('image/png');
Â  Â  link.download='matches.png';
Â  Â  link.click();
Â  });
});
document.getElementById('finalView').addEventListener('click',()=>{
    alert('Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© ØºÙŠØ± Ù…ÙØ¹Ù„Ø© ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ØŒ ÙˆÙ„ÙƒÙ†Ù‡Ø§ Ø¹Ø§Ø¯Ø©Ù‹ Ù…Ø§ ØªÙ†Ù‚Ù„Ùƒ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ.');
});

});
</script>

</body>
</html>
